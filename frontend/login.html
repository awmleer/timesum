<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TIMESUM·登录</title>

    <!--bootstrap & jquery & fontawesome-->
    <link href="static/bootstrap/ui.css" rel="stylesheet">
    <script src="static/jquery.min.js"></script>
    <script src="static/bootstrap/bootstrap.min.js"></script>
    <link href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet">

    <!--buttons-->
    <link rel="stylesheet" href="static/bootstrap/buttons.css">

</head>
<body>
<div class="container" style="margin-bottom: 2em">
    <div class="row">
        <div id="logo_group" class="col-xs-8 col-xs-offset-2">
            <img src="img/logo_circle.svg" style="width: 100%;margin: 2em 0">
            <img src="img/timesum.svg" style="width: 90%;margin-left: 5%">
            <p style="width: 100%;text-align: center;color: gray;font-size: 1.5em;margin-top: 0.3em">活动时间协调利器</p>
        </div>
    </div>

    <form>
        <div class="row">
            <div class="col-xs-10 col-xs-offset-1" style="margin-bottom: 1.5em;">
                <label class="input-label" for="phone" style="padding-top: 3px"><i class="fa fa-mobile fa-2x"></i></label>
                <input style="padding-left:3em;" id="phone" class="form-control input-text" type="text">
            </div>
            <div class="col-xs-10 col-xs-offset-1" style="margin-bottom: 1.5em;">
                <label class="input-label" for="password"><i class="fa fa-lock fa-lg"></i></label>
                <input style="padding-left:3em;" id="password" class="form-control input-text" type="password">
            </div>
        </div>

        <div class="row">
            <div class="col-xs-10 col-xs-offset-1" id="submit_div">
                <a href="signup.html" class="button button-pill button-main button-border" style="padding-left: 16px;padding-right: 16px;text-align: center;">注册</a>
                <button onclick="login()" id="submit_button" type="button" class="button button-pill button-main" style="display: inline-block;float: right;">登录</button>
            </div>
            <div class="col-xs-7 col-xs-offset-4">
                <p style="text-align: right;width: 100%;margin-top: 0.3em"><a class="small" style="color: gray;">忘记密码</a></p>
            </div>
        </div>

    </form>


</div>
</body>
<script>
    $(document).ready(function () {
        $("#logo_group").css("margin-top",0.1*document.body.clientHeight).css("margin-bottom",0.08*document.body.clientHeight);
        $("#submit_button").css("width",$("#password").width()-$("#submit_div a").width());
    });

    function login() {
        var phone=$("#phone").val();
        var password=$("#password").val();

        if (phone == "") {
            alert("请输入电话号码");
            $("#phone").focus();
            return;
        }
        if (password == "") {
            alert("请输入密码");
            $("#password").focus();
            return;
        }

        $.ajax({
            url: "api/login",
            type: "get",
            data: {
                phone: phone,
                password:password
            }
        }).done(function (data) {
            if (data == 'success') {
                location.href='main.html';
            }else if (data == 'wrong password') {
                alert("您输入的密码错误");
            }else if (data == 'wrong phone') {
                alert("您输入的手机号尚未注册");
            }
        }).fail(function () {
            alert("请求失败");
        });
    }
</script>
</html>